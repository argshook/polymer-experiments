<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Stupid angular example</title>
</head>
<body>
    <angular-component></angular-component>
    <dropdown-component></dropdown-component>
    <slider-component></slider-component>

    <script src="vendor/webcomponents.min.js"></script>
    <script>window.Polymer = { dom: 'shadow' };</script>
    <script src="dist/html-imports.js"></script>
    <script src="dist/bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js"></script>
    <script src="https://rawgit.com/argshook/ng-on/master/src/ng-on.js"></script>

    <script>
        angular
            .module('app', ['argshook.ngOn'])
            .component('angularComponent', {
                templateUrl: 'clock-template',
                controller: function() {
                  this.format = '24h';
                  this.toggleFormat = function() {
                    this.format = this.format === '24h' ? '12h' : '24h';
                  };

                  this.events = {
                    'format-changed': function(e) { logEvent(e) },
                    'custom-polymer-event': function(e) { logEvent(e) },
                    click: function(e) { logEvent(e) }
                  }

                  function logEvent(e) {
                    console.dir(e.type, e.details);
                  }
                }
            })

            .component('dropdownComponent', {
              templateUrl: 'dropdown-template',
              controller: function() {
                this.selectedValue = 'nothing yet';

                this.dropdownEvents = {
                    'value-changed': function(event) {
                        this.selectedValue = this.items.find(function(i) {
                            return i.value == event.detail.value;
                        });
                    }.bind(this)
                };

                this.items = [
                  { value: 1, label: 'first' },
                  { value: 2, label: 'second' },
                  { value: 3, label: 'third' }
                ];
              }
            })

            .component('sliderComponent', {
              templateUrl: 'slider-template',
              controller: function() {
                this.value = 0;

                this.handleChange = function({ detail }) {
                  this.value = detail.value;
                };
              }
            });
    </script>

    <script id="clock-template" type="text/ng-template">
      <div>
        Change format from angular:
        <br>

        <input type="radio" ng-model="$ctrl.format" value="12h" /> 12H
        <br>

        <input type="radio" ng-model="$ctrl.format" value="24h" /> 24H

        <pr-clock ng-on="$ctrl.events" format="{{$ctrl.format}}">
          This is clock:
        </pr-clock>
      </div>
    </script>

    <script id="dropdown-template" type="text/ng-template">
      <div>
        <pr-dropdown label="Some items:" ng-on="$ctrl.dropdownEvents">
          <pr-dropdown-row ng-repeat="item in $ctrl.items track by $index" value="{{item.value}}">
            {{item.label}}
          </pr-dropdown-row>
        </pr-dropdown>
        Selected: {{$ctrl.selectedValue}}
      </div>
    </script>

    <script id="slider-template" type="text/ng-template">
      <div>
        <pr-slider ng-on="{ 'value-changed': $ctrl.handleChange }" style="margin: 20px; width: 300px;"></pr-slider>
        <strong>{{$ctrl.value}}</strong>
      </div>
    </script>
</body>
</html>
